<?xml version="1.0" encoding="UTF-8"?>
<!--xmlns:context="http://www.springframework.org/schema/context"-->
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

       xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
                                http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <bean id="abstractDaoPattern" abstract="true">
        <description>abstract super bean for our DAOs.</description>
        <property name="sessionFactory" ref="hbnSessionFactory"/>
    </bean>

	<bean id="projectMemberDao" class="com.jakeapp.core.dao.HibernateProjectMemberDao" parent="abstractDaoPattern"/>
<!-- 
    <bean id="configurationDao" class="com.jakeapp.core.dao.HibernateConfigurationDao" parent="abstractDaoPattern"/>
    <bean id="fileObjectDao" class="com.jakeapp.core.dao.HibernateFileObjectDao" parent="abstractDaoPattern"/>
    <bean id="jakeObjectDao" class="com.jakeapp.core.dao.HibernateJakeObjectDao" parent="abstractDaoPattern"/>
    <bean id="logEntryDao" class="com.jakeapp.core.dao.HibernateLogEntryDao" parent="abstractDaoPattern"/>
    <bean id="noteObjectDao" class="com.jakeapp.core.dao.HibernateNoteObjectDao" parent="abstractDaoPattern"/>
-->     
	<bean id="hbnSessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" scope="prototype">
        <description>hibernate session factory</description>
        <property name="annotatedClasses">
            <list>
                <value>com.jakeapp.core.domain.ProjectMember</value>
                <value>com.jakeapp.core.domain.UserId</value>
                <value>com.jakeapp.core.domain.FileObject</value>
                <value>com.jakeapp.core.domain.JakeMessage</value>
                <value>com.jakeapp.core.domain.JakeObject</value>
         <!--   <value>com.jakeapp.core.domain.LogEntry</value> -->
                <value>com.jakeapp.core.domain.NoteObject</value>
                <value>com.jakeapp.core.domain.ServiceCredentials</value>
                <value>com.jakeapp.core.domain.XMPPUserId</value>
            </list>
        </property>
        <property name="configurationClass" value="org.hibernate.cfg.AnnotationConfiguration"/>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">create-drop</prop>
           		<prop key="hibernate.hbm2ddl.SchemaExport.importScript">test-import.sql</prop> 
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hiberante.format_sql">true</prop>
                
                <prop key="hibernate.current_session_context_class">thread</prop> 
				<prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</prop>
                
            </props>
        </property>
        <property name="dataSource" ref="hsqldbDataSource"/>
    </bean>
		
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" scope="prototype">
    	<description>basic memory DB data source</description>
        <property name="driverClassName" value="org.hsqldb.jdbcDriver"/>
        <property name="url" value="jdbc:hsqldb:mem:default"/>
        <property name="username" value="sa"/>
        <property name="password" value=""/>
        <property name="connectionProperties">
            <props>
                <prop key="shutdown">true</prop>
            </props>
        </property>
    </bean>

</beans>
